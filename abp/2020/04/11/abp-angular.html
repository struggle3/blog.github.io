<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>ye程序员</title>
	<link rel="icon" href="/assets/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="abp,abp vnexta,abp前端,angular" />
    <meta name="description" content="第一次使用ABP VNext进行angular前端开发" />
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css">
    <![endif]-->
    <!--[if lt IE 9]>
       <script src="https://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
       <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
    <![endif]-->
    <link href="/assets/css/main.css" rel="stylesheet" type="text/css">



<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?417785846428737cc886d2095c0511c3";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    

</head>

<body>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="navbar navbar-custom navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/assets/images/logo.png" height="30" />
                </a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    
                    <li class="active"><a href="/">首页</a></li>
                    <li class="active"><a href="/archive.html">归档</a></li>
                    <li class="active"><a href="/categories.html">分类</a></li>
                    <li class="active"><a href="/tags.html">标签</a></li>
                    <li class="active"><a href="/about.html">关于</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>


<div class="wrap">
    <div class="container container-left">
        <div class="row">
            <div class="col-md-2 hidden-xs">
                
<div class="sidebar well">
    <header class="sidebar-header" role="banner">
        <a href="/">
            <img src="/assets/images/touxiang.gif" class="img-circle" />
        </a>
        <!--
        <h3 class="title">
        <a href="/"></a>
        </h3>
        -->
    </header>
    <div class="text-center">
        欢迎来到我的博客！
    </div>
</div>


<div class="sidebar well">
    <h1>置顶文章</h1>
    <ul>
        
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    <li><a href="/docker/2021/02/12/docker-install.html">docker安装</a></li>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    <li><a href="/abp/2020/12/01/abp-deployment.html">abpvnext部署</a></li>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
                    <li><a href="/abp/2020/12/07/abp-sqlite.html">abp集成SQLite</a></li>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
    </ul>
</div>


<div class="sidebar well">
    <h1>最新发表</h1>
    <ul>
        
          <li><a href="/java/2021/03/16/springboot06.html">Spring Boot日志</a></li>
        
          <li><a href="/java/2021/03/15/springboot05.html">Spring Boot热部署</a></li>
        
          <li><a href="/java/2021/03/14/springboot04.html">Spring Boot配置类</a></li>
        
          <li><a href="/java/2021/03/13/springboot03.html">Spring Boot属性注入配置</a></li>
        
          <li><a href="/java/2021/03/12/springboot02.html">Spring Boot配置文件</a></li>
        
    </ul>
</div>

<div class="sidebar well">
    
<h1>友情链接</h1>
<ul>
  <!-- <li><a href="#">One</a></li>
  <li><a href="#">Two</a></li>
  <li><a href="#">Three</a></li>
  <li><a href="#">Four</a></li> -->
  
  <li>
    <a href="http://jekyllcn.com/" target="_blank">
      jekyll中文
    </a>
  </li> 
  
</ul>

</div>

            </div>
            <div class="col-md-10">
                
<div class="well article">
        <h2><a href="/abp/2020/04/11/abp-angular.html">abp前端开发</a></h2>
        <span class="post-date">
            
            2020-04-11
        </span>
        <hr style="border-top:1px solid #28323C;"/>
    
    <div class="post-content">
    <blockquote>
  <p>前端页面开发相关</p>
</blockquote>

<p>1.添加newsitem模块</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng generate module newsitem <span class="nt">--route</span> newsitem <span class="nt">--module</span> app.module
</code></pre></div></div>

<p>2.修改路由并添加主题:app-routing.module.ts</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ApplicationLayoutComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.theme.basic</span><span class="dl">'</span><span class="p">;</span>
<span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">newsitem</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">ApplicationLayoutComponent</span><span class="p">,</span>
    <span class="na">loadChildren</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./news/newsitem/newsitem.module</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">m</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">NewsitemModule</span><span class="p">),</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">routes</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">::News:NewsItem</span><span class="dl">'</span>
      <span class="p">}</span> <span class="k">as</span> <span class="nx">ABP</span><span class="p">.</span><span class="nx">Route</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>
<p>3.路由占位符：newsitem.component.html</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
</code></pre></div></div>

<p>4.添加newsitem的列表组件</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng generate component news/newsitem/newsitem-list
</code></pre></div></div>

<p>5.在newsitem.module.ts中引入SharedModule使用共享的组件和服务</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CommonModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/common</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemRoutingModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./newsitem-routing.module</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./newsitem.component</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemListComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./newsitem-list/newsitem-list.component</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">SharedModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/shared/shared.module</span><span class="dl">'</span><span class="p">;</span>


<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span><span class="nx">NewsitemComponent</span><span class="p">,</span> <span class="nx">NewsitemListComponent</span><span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">CommonModule</span><span class="p">,</span>
    <span class="nx">NewsitemRoutingModule</span><span class="p">,</span>
    <span class="nx">SharedModule</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NewsitemModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>6.添加模块子组件并修改路由：newsitem-routing.module.ts</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/router</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./newsitem.component</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemListComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./newsitem-list/newsitem-list.component</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">NewsitemComponent</span><span class="p">,</span>
    <span class="na">children</span><span class="p">:</span> <span class="p">[{</span> <span class="na">path</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">NewsitemListComponent</span> <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forChild</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
  <span class="na">exports</span><span class="p">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NewsitemRoutingModule</span> <span class="p">{}</span>

</code></pre></div></div>
<p>7.添加state</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng generate ngxs-schematic:state newsitems
</code></pre></div></div>

<blockquote>
  <p>说明：对state必须要类上添加Injectable依赖注入</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span><span class="c1">// 依赖注入</span>
</code></pre></div></div>

<p>8.定义数据模型</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ABP</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.core</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// 第一步</span>
<span class="c1">// tslint:disable-next-line: no-namespace</span>
<span class="k">export</span> <span class="nx">namespace</span> <span class="nx">NewsitemManagement</span> <span class="p">{</span>
  <span class="k">export</span> <span class="kr">interface</span> <span class="nx">State</span> <span class="p">{</span>
    <span class="nl">result</span><span class="p">:</span> <span class="nx">Response</span><span class="p">;</span>
    <span class="nl">selectedItem</span><span class="p">:</span> <span class="nx">NewsItem</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">export</span> <span class="nx">type</span> <span class="nx">Response</span> <span class="o">=</span> <span class="nx">ABP</span><span class="p">.</span><span class="nx">PagedResponse</span><span class="o">&lt;</span><span class="nx">NewsItem</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="c1">// 列表</span>
  <span class="k">export</span> <span class="kr">interface</span> <span class="nx">NewsItem</span> <span class="p">{</span>
    <span class="nl">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">short</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">full</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">published</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">startDateUtc</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">endDateUtc</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">allowComments</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">orderBy</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 创建</span>
  <span class="k">export</span> <span class="kr">interface</span> <span class="nx">CreateNewsItemInput</span> <span class="p">{</span>
    <span class="nl">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">short</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">full</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">published</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">startDateUtc</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">endDateUtc</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">allowComments</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">orderBy</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 修改</span>
  <span class="k">export</span> <span class="kr">interface</span> <span class="nx">UpdateNewsItemInput</span> <span class="kd">extends</span> <span class="nx">CreateNewsItemInput</span> <span class="p">{</span>
    <span class="nl">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>9.添加服务</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng generate service newsitem/newsitem
</code></pre></div></div>

<blockquote>
  <p>修改newsitems.actions.ts文件如下</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 第二步</span>
<span class="c1">// 描述要采取的操作及其关联元数据的类</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ABP</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemManagement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/store/models/newsitems</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// 列表</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GetNewsItems</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[NewsitemManagement] Get</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">?:</span> <span class="nx">ABP</span><span class="p">.</span><span class="nx">PageQueryParams</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// 获取</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GetById</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[NewsitemManagement] Get NewsItem By Id</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// 创建</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateNewsItem</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[NewsitemManagement] Create NewsItem</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">CreateNewsItemInput</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// 删除</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DeleteNewsItem</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[NewsitemManagement] Delete NewsItem</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// 编辑</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UpdateNewsItem</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[NewsitemManagement] Update NewsItem</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">UpdateNewsItemInput</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">string</span> <span class="p">})</span> <span class="p">{}</span>
  <span class="c1">// constructor(public payload: NewsitemManagement.UpdateNewsItemInput, public id?: string) { }</span>
<span class="p">}</span>

</code></pre></div></div>

<blockquote>
  <p>修改newsitem.service.ts文件如下</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 第三步</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">RestService</span><span class="p">,</span> <span class="nx">Rest</span><span class="p">,</span> <span class="nx">ABP</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemManagement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/store/models</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">({</span>
  <span class="na">providedIn</span><span class="p">:</span> <span class="dl">'</span><span class="s1">root</span><span class="dl">'</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NewsitemService</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">rest</span><span class="p">:</span> <span class="nx">RestService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="c1">// 列表</span>
  <span class="kd">get</span><span class="p">(</span><span class="nx">params</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">as</span> <span class="nx">ABP</span><span class="p">.</span><span class="nx">PageQueryParams</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">Response</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="na">request</span><span class="p">:</span> <span class="nx">Rest</span><span class="p">.</span><span class="nx">Request</span><span class="o">&lt;</span><span class="kc">null</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/api/app/newsItem</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">params</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">request</span><span class="o">&lt;</span><span class="kc">null</span><span class="p">,</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">Response</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 获取</span>
  <span class="nx">getById</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="na">request</span><span class="p">:</span> <span class="nx">Rest</span><span class="p">.</span><span class="nx">Request</span><span class="o">&lt;</span><span class="kc">null</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="s2">`/api/app/newsItem/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">request</span><span class="o">&lt;</span><span class="kc">null</span><span class="p">,</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 创建</span>
  <span class="nx">create</span><span class="p">(</span><span class="nx">body</span><span class="p">:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">CreateNewsItemInput</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="na">request</span><span class="p">:</span> <span class="nx">Rest</span><span class="p">.</span><span class="nx">Request</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">CreateNewsItemInput</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/api/app/newsItem</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">body</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">request</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">CreateNewsItemInput</span><span class="p">,</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 删除</span>
  <span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="na">request</span><span class="p">:</span> <span class="nx">Rest</span><span class="p">.</span><span class="nx">Request</span><span class="o">&lt;</span><span class="kc">null</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="s2">`/api/app/newsItem/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">request</span><span class="o">&lt;</span><span class="kc">null</span><span class="p">,</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 编辑</span>
  <span class="nx">update</span><span class="p">(</span><span class="nx">body</span><span class="p">:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">UpdateNewsItemInput</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`/api/app/newsItem/</span><span class="p">${</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="k">delete</span> <span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>

    <span class="kd">const</span> <span class="na">request</span><span class="p">:</span> <span class="nx">Rest</span><span class="p">.</span><span class="nx">Request</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">UpdateNewsItemInput</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">url</span><span class="p">,</span>
      <span class="nx">body</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">request</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">CreateNewsItemInput</span><span class="p">,</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// update(updateBookInput: NewsitemManagement.UpdateNewsItemInput): Observable&lt;NewsitemManagement.NewsItem&gt; {</span>
  <span class="c1">//   return this.rest.request&lt;NewsitemManagement.UpdateNewsItemInput, NewsitemManagement.NewsItem&gt;({</span>
  <span class="c1">//     method: 'PUT',</span>
  <span class="c1">//     url: `/api/app/newsItem/${updateBookInput.id}`,</span>
  <span class="c1">//     body: updateBookInput</span>
  <span class="c1">//   });</span>
  <span class="c1">// }</span>
<span class="p">}</span>

</code></pre></div></div>

<blockquote>
  <p>修改newsitems.state.ts文件如下</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 第四步</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">State</span><span class="p">,</span> <span class="nx">Action</span><span class="p">,</span> <span class="nx">StateContext</span><span class="p">,</span> <span class="nx">Selector</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@ngxs/store</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">GetNewsItems</span><span class="p">,</span>
  <span class="nx">CreateNewsItem</span><span class="p">,</span>
  <span class="nx">DeleteNewsItem</span><span class="p">,</span>
  <span class="nx">UpdateNewsItem</span><span class="p">,</span>
  <span class="nx">GetById</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../actions/newsitems.actions</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemManagement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../models/newsitems</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/news/newsitem/shared/newsitem.service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">tap</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">ABP</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.core</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// 状态定义</span>
<span class="p">@</span><span class="nd">State</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">NewsitemsState</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span> <span class="na">result</span><span class="p">:</span> <span class="p">{},</span> <span class="na">selectedItem</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span> <span class="k">as</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span>
<span class="p">})</span>
<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span> <span class="c1">// 依赖注入</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NewsitemsState</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Selector</span><span class="p">()</span>
  <span class="kd">static</span> <span class="kd">get</span><span class="p">({</span> <span class="nx">result</span> <span class="p">}:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="p">):</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="p">[]</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Selector</span><span class="p">()</span>
  <span class="kd">static</span> <span class="nx">getNewsItemTotalCount</span><span class="p">({</span> <span class="nx">result</span> <span class="p">}:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="p">):</span> <span class="nx">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">totalCount</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">newsitemService</span><span class="p">:</span> <span class="nx">NewsitemService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Action</span><span class="p">(</span><span class="nx">GetNewsItems</span><span class="p">)</span>
  <span class="kd">get</span><span class="p">({</span> <span class="nx">patchState</span> <span class="p">}:</span> <span class="nx">StateContext</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">payload</span> <span class="p">}:</span> <span class="nx">GetNewsItems</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newsitemService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
      <span class="nx">tap</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span>
        <span class="nx">patchState</span><span class="p">({</span>
          <span class="nx">result</span>
        <span class="p">})</span>
      <span class="p">)</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Action</span><span class="p">(</span><span class="nx">GetById</span><span class="p">)</span>
  <span class="nx">getById</span><span class="p">({</span> <span class="nx">patchState</span> <span class="p">}:</span> <span class="nx">StateContext</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">payload</span> <span class="p">}:</span> <span class="nx">GetById</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newsitemService</span><span class="p">.</span><span class="nx">getById</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
      <span class="nx">tap</span><span class="p">(</span><span class="nx">selectedItem</span> <span class="o">=&gt;</span>
        <span class="nx">patchState</span><span class="p">({</span>
          <span class="nx">selectedItem</span><span class="p">,</span>
        <span class="p">}),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Action</span><span class="p">(</span><span class="nx">CreateNewsItem</span><span class="p">)</span>
  <span class="nx">addNewsItem</span><span class="p">(</span><span class="nx">ctx</span><span class="p">:</span> <span class="nx">StateContext</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">CreateNewsItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newsitemService</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Action</span><span class="p">(</span><span class="nx">DeleteNewsItem</span><span class="p">)</span>
  <span class="nx">deleteNewsItem</span><span class="p">(</span><span class="nx">ctx</span><span class="p">:</span> <span class="nx">StateContext</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">DeleteNewsItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newsitemService</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Action</span><span class="p">(</span><span class="nx">UpdateNewsItem</span><span class="p">)</span>
  <span class="nx">updateNewsItem</span><span class="p">(</span><span class="nx">ctx</span><span class="p">:</span> <span class="nx">StateContext</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">State</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">UpdateNewsItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newsitemService</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>
<p>10.组件代码编写</p>

<blockquote>
  <p>修改newsitem-list.component.ts文件如下</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Store</span><span class="p">,</span> <span class="nx">Select</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@ngxs/store</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemsState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/store/states</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NewsitemManagement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/store/models</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">GetNewsItems</span><span class="p">,</span>
  <span class="nx">CreateNewsItem</span><span class="p">,</span>
  <span class="nx">UpdateNewsItem</span><span class="p">,</span>
  <span class="nx">DeleteNewsItem</span><span class="p">,</span>
  <span class="nx">GetById</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">src/app/store/actions</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormControl</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/forms</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">finalize</span><span class="p">,</span> <span class="nx">pluck</span><span class="p">,</span> <span class="nx">switchMap</span><span class="p">,</span> <span class="nx">take</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">NgbDateNativeAdapter</span><span class="p">,</span> <span class="nx">NgbDateAdapter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@ng-bootstrap/ng-bootstrap</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ABP</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ConfirmationService</span><span class="p">,</span> <span class="nx">Toaster</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@abp/ng.theme.shared</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-newsitem-list</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./newsitem-list.component.html</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">./newsitem-list.component.scss</span><span class="dl">'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">NgbDateAdapter</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">NgbDateNativeAdapter</span> <span class="p">}]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NewsitemListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Select</span><span class="p">(</span><span class="nx">NewsitemsState</span><span class="p">.</span><span class="kd">get</span><span class="p">)</span>
  <span class="nx">data$</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Select</span><span class="p">(</span><span class="nx">NewsitemsState</span><span class="p">.</span><span class="nx">getNewsItemTotalCount</span><span class="p">)</span>
  <span class="nx">totalCount$</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">number</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nx">isModalVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nx">modalBusy</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nl">form</span><span class="p">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nl">pageQuery</span><span class="p">:</span> <span class="nx">ABP</span><span class="p">.</span><span class="nx">PageQueryParams</span> <span class="o">=</span> <span class="p">{</span> <span class="na">maxResultCount</span><span class="p">:</span> <span class="mi">10</span> <span class="p">};</span>

  <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="nx">sortKey</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="nl">selected</span><span class="p">:</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">store</span><span class="p">:</span> <span class="nx">Store</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">fb</span><span class="p">:</span> <span class="nx">FormBuilder</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">confirmationService</span><span class="p">:</span> <span class="nx">ConfirmationService</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">GetNewsItems</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pageQuery</span><span class="p">)).</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">onPageChange</span><span class="p">(</span><span class="nx">page</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pageQuery</span><span class="p">.</span><span class="nx">skipCount</span> <span class="o">=</span> <span class="p">(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">pageQuery</span><span class="p">.</span><span class="nx">maxResultCount</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">as</span> <span class="nx">NewsitemManagement</span><span class="p">.</span><span class="nx">NewsItem</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">openModal</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">edit</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">store</span>
      <span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">GetById</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">pluck</span><span class="p">(</span><span class="dl">'</span><span class="s1">NewsitemsState</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">selectedItem</span><span class="dl">'</span><span class="p">))</span><span class="c1">// selectedItem必须与state中的tap返回一致</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">selectedItem</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">selectedItem</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">openModal</span><span class="p">();</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">confirmationService</span>
      <span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">'</span><span class="s1">::NewsItem:NewsItemDeletionConfirmationMessage</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">::NewsItem:AreYouSure</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">messageLocalizationParams</span><span class="p">:</span> <span class="p">[</span><span class="nx">title</span><span class="p">]</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">status</span><span class="p">:</span> <span class="nx">Toaster</span><span class="p">.</span><span class="nx">Status</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="nx">Toaster</span><span class="p">.</span><span class="nx">Status</span><span class="p">.</span><span class="nx">confirm</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">DeleteNewsItem</span><span class="p">(</span><span class="nx">id</span><span class="p">)).</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">());</span>
        <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">openModal</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buildForm</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isModalVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">buildForm</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
      <span class="na">title</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">title</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">(</span><span class="mi">256</span><span class="p">)]],</span>
      <span class="na">short</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">short</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">(</span><span class="mi">256</span><span class="p">)]],</span>
      <span class="na">full</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">full</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">(</span><span class="mi">256</span><span class="p">)]],</span>
      <span class="na">startDateUtc</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">startDateUtc</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]],</span>
      <span class="na">endDateUtc</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">endDateUtc</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]],</span>
      <span class="na">published</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">published</span> <span class="o">||</span> <span class="kc">false</span><span class="p">],</span>
      <span class="na">allowComments</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">allowComments</span> <span class="o">||</span> <span class="kc">false</span><span class="p">],</span>
      <span class="na">orderBy</span><span class="p">:</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">orderBy</span> <span class="o">||</span> <span class="mi">0</span><span class="p">]</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">save</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">valid</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">modalBusy</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">modalBusy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">store</span>
      <span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">id</span>
          <span class="p">?</span> <span class="k">new</span> <span class="nx">UpdateNewsItem</span><span class="p">({</span>
              <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>
              <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
              <span class="na">id</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">selected</span><span class="p">.</span><span class="nx">id</span>
            <span class="p">})</span>
          <span class="p">:</span> <span class="k">new</span> <span class="nx">CreateNewsItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">modalBusy</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)))</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">isModalVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
      <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<blockquote>
  <p>修改newsitem-list.component.html文件如下</p>
</blockquote>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-header"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col col-md-6"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h5</span> <span class="na">class=</span><span class="s">"card-title"</span><span class="nt">&gt;</span>
          ::NewsItem:List
        <span class="nt">&lt;/h5&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-right col col-md-6"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-lg-right pt-2"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"create"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">(click)=</span><span class="s">"create()"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-plus mr-1"</span><span class="nt">&gt;&lt;/i&gt;</span>
            <span class="nt">&lt;span&gt;</span>::NewsItem:Add<span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;abp-table</span> <span class="na">*ngIf=</span><span class="s">"[150, 0] as columnWidths"</span> <span class="na">[abpLoading]=</span><span class="s">"loading"</span> <span class="na">[abpLoadingDelay]=</span><span class="s">"500"</span> <span class="na">[abpTableSort]=</span><span class="s">"{ key: sortKey, order: sortOrder }"</span> <span class="na">[colgroupTemplate]=</span><span class="s">"tableColGroup"</span>
      <span class="na">[headerTemplate]=</span><span class="s">"tableHeader"</span> <span class="na">[bodyTemplate]=</span><span class="s">"tableBody"</span> <span class="na">[value]=</span><span class="s">"data$ | async"</span> <span class="na">[rows]=</span><span class="s">"pageQuery.maxResultCount"</span> <span class="na">[totalRecords]=</span><span class="s">"totalCount$ | async"</span> <span class="na">[scrollable]=</span><span class="s">"true"</span>
      <span class="na">(pageChange)=</span><span class="s">"onPageChange($event)"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ng-template</span> <span class="na">#tableColGroup</span><span class="nt">&gt;</span>
        <span class="nt">&lt;colgroup&gt;</span>
          <span class="nt">&lt;col</span> <span class="na">*ngFor=</span><span class="s">"let width of columnWidths"</span> <span class="na">[ngStyle]=</span><span class="s">"{ 'width.px': width || undefined }"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/colgroup&gt;</span>
      <span class="nt">&lt;/ng-template&gt;</span>
      <span class="nt">&lt;ng-template</span> <span class="na">#tableHeader</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;th&gt;</span>::NewsItem:Actions<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th</span> <span class="na">(click)=</span><span class="s">"sortOrderIcon.sort('title')"</span><span class="nt">&gt;</span>
            ::NewsItem:Title
            <span class="nt">&lt;abp-sort-order-icon</span> <span class="na">#sortOrderIcon</span> <span class="na">sortKey=</span><span class="s">"title"</span> <span class="na">[(selectedSortKey)]=</span><span class="s">"sortKey"</span> <span class="na">[(order)]=</span><span class="s">"sortOrder"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/abp-sort-order-icon&gt;</span>
          <span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th</span> <span class="na">(click)=</span><span class="s">"sortOrderIcon.sort('short')"</span><span class="nt">&gt;</span>
            ::NewsItem:Short
            <span class="nt">&lt;abp-sort-order-icon</span> <span class="na">#sortOrderIcon</span> <span class="na">sortKey=</span><span class="s">"short"</span> <span class="na">[(selectedSortKey)]=</span><span class="s">"sortKey"</span> <span class="na">[(order)]=</span><span class="s">"sortOrder"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/abp-sort-order-icon&gt;</span>
          <span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th</span> <span class="na">(click)=</span><span class="s">"sortOrderIcon.sort('orderBy')"</span><span class="nt">&gt;</span>
            ::NewsItem:OrderBy
            <span class="nt">&lt;abp-sort-order-icon</span> <span class="na">#sortOrderIcon</span> <span class="na">sortKey=</span><span class="s">"orderBy"</span> <span class="na">[(selectedSortKey)]=</span><span class="s">"sortKey"</span> <span class="na">[(order)]=</span><span class="s">"sortOrder"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/abp-sort-order-icon&gt;</span>
          <span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/ng-template&gt;</span>
      <span class="nt">&lt;ng-template</span> <span class="na">#tableBody</span> <span class="na">let-data</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-center"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">ngbDropdown</span> <span class="na">container=</span><span class="s">"body"</span> <span class="na">class=</span><span class="s">"d-inline-block"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary btn-sm dropdown-toggle"</span> <span class="na">data-toggle=</span><span class="s">"dropdown"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span> <span class="na">ngbDropdownToggle</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-cog mr-1"</span><span class="nt">&gt;&lt;/i&gt;</span>::NewsItem:Actions
              <span class="nt">&lt;/button&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">ngbDropdownMenu</span><span class="nt">&gt;</span>
                <span class="nt">&lt;button</span> <span class="na">ngbDropdownItem</span> <span class="na">(click)=</span><span class="s">"edit(data.id)"</span><span class="nt">&gt;</span>
                  ::NewsItem:Edit
                <span class="nt">&lt;/button&gt;</span>
                <span class="nt">&lt;button</span> <span class="na">ngbDropdownItem</span> <span class="na">(click)=</span><span class="s">"delete(data.id, data.title)"</span><span class="nt">&gt;</span>
                  ::NewsItem:Delete
                <span class="nt">&lt;/button&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            
          <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/ng-template&gt;</span>
    <span class="nt">&lt;/abp-table&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;abp-modal</span> <span class="na">[(visible)]=</span><span class="s">"isModalVisible"</span> <span class="na">[busy]=</span><span class="s">"modalBusy"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ng-template</span> <span class="na">#abpHeader</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h3&gt;</span>(selected?.id ? '::NewsItem:EditNewsItem' : '::NewsItem:NewNewsItem') | abpLocalization<span class="nt">&lt;/h3&gt;</span>
  <span class="nt">&lt;/ng-template&gt;</span>

  <span class="nt">&lt;ng-template</span> <span class="na">#abpBody</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">[formGroup]=</span><span class="s">"form"</span> <span class="na">(ngSubmit)=</span><span class="s">"save()"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-title"</span><span class="nt">&gt;</span>::NewsItem:Title<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-title"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"title"</span> <span class="na">autofocus</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-short"</span><span class="nt">&gt;</span>::NewsItem:Short<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-short"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"short"</span> <span class="na">autofocus</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-full"</span><span class="nt">&gt;</span>::NewsItem:Full<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-full"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"full"</span> <span class="na">autofocus</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-startDateUtc"</span><span class="nt">&gt;</span>::NewsItem:StartDateUtc<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="c">&lt;!-- &lt;input #datepicker="ngbDatepicker" class="form-control" name="startDateUtc" formControlName="startDateUtc" ngbDatepicker (click)="datepicker.toggle()" /&gt; --&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-endDateUtc"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"startDateUtc"</span> <span class="na">autofocus</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-endDateUtc"</span><span class="nt">&gt;</span>::NewsItem:EndDateUtc<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-endDateUtc"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"endDateUtc"</span> <span class="na">autofocus</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-orderBy"</span><span class="nt">&gt;</span>::NewsItem:OrderBy<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"news-orderBy"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">formControlName=</span><span class="s">"orderBy"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span>
          <span class="na">for=</span><span class="s">"news-allowComments"</span><span class="nt">&gt;</span>::NewsItem:AllowComments<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom-checkbox custom-control mb-2"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"allowComments-true"</span> <span class="na">class=</span><span class="s">"custom-control-input"</span> <span class="na">formControlName=</span><span class="s">"allowComments"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"custom-control-label"</span> <span class="na">for=</span><span class="s">"allowComments-true"</span><span class="nt">&gt;</span>::NewsItem:AllowComments<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"news-published"</span><span class="nt">&gt;</span>::NewsItem:Published<span class="nt">&lt;/label&gt;&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom-checkbox custom-control mb-2"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"allowComments-published"</span> <span class="na">class=</span><span class="s">"custom-control-input"</span> <span class="na">formControlName=</span><span class="s">"published"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"custom-control-label"</span> <span class="na">for=</span><span class="s">"allowComments-published"</span><span class="nt">&gt;</span>::NewsItem:Published<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/ng-template&gt;</span>

  <span class="nt">&lt;ng-template</span> <span class="na">#abpFooter</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-secondary"</span> <span class="na">#abpClose</span><span class="nt">&gt;</span>::NewsItem:Cancel<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;abp-button</span> <span class="na">iconClass=</span><span class="s">"fa fa-check"</span> <span class="na">(click)=</span><span class="s">"save()"</span> <span class="na">[disabled]=</span><span class="s">"form?.invalid"</span><span class="nt">&gt;</span>::NewsItem:Save<span class="nt">&lt;/abp-button&gt;</span>
  <span class="nt">&lt;/ng-template&gt;</span>
<span class="nt">&lt;/abp-modal&gt;</span>
</code></pre></div></div>

<blockquote>
  <p>效果如下</p>
</blockquote>

<p><img src="/assets/images/abp/2020041101.png" alt="" />
<img src="/assets/images/abp/2020041102.png" alt="" />
<img src="/assets/images/abp/2020041103.png" alt="" />
<img src="/assets/images/abp/2020041104.png" alt="" /></p>

    <hr style="border-top:1px solid #28323C;"/>

    <!-- tags and categories under post -->
    
    <ul class="list-unstyled list-inline">
      <li><i class="icon-folder-open"></i></li>
      
      
         
            <li class="icon-style"><a href="/categories.html">
                abp <span>(10)</span>
                
            </a></li>
        
      
    </ul>
      

    
    <ul class="list-unstyled list-inline">
      <li><i class="icon-tags"></i></li>
      
      
         
            <li class="icon-style">
                <a href="/tags.html">
                abp <span>(10)</span>
                
                </a>
            </li>
        
      
      
    </ul>
      

    </div>
    
</div>
<div class="pagination">
    
    <a class="btn btn-default" href="/abp/2020/11/12/abp-antblazor.html" class="next">前一篇</a>
    
    
    <a class="btn btn-default" href="/abp/2020/04/10/abp-service.html" class="previous">后一篇</a>
    
</div>
            </div>
        </div>
    </div>

    
<div class="footer">
    <p>&copy;2021 ye程序员版权所有
             
                <a href="http://www.beian.miit.gov.cn">
                蜀ICP备19012996号-3
                </a>
                <!-- not the last, output a ',' -->
                
            
    </p>
</div>

<!-- 
    

    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', '', 'auto');
    ga('send', 'pageview');
  </script>

 
-->

</body>
</html>

</div>